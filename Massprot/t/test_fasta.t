use strict;
use warnings;
use Data::Dumper;
use Test::More 'no_plan';
use File::Temp qw/tempdir/;
use Try::Tiny;
use Massprot::Fastadb;




my $output_folder= tempdir();#( CLEANUP => 1 );
my $output_full_path = File::Spec->catpath( '', $output_folder, "test.reverse.fasta" );
my $reversedb_text;

{local $/;$reversedb_text=<DATA>;}

ok (initialize_fasta(),	"Test1: Uniprot Fasta database started");
ok (reversedb(),		"Test2: Uniprot Fasta database reversed created at $output_full_path. Filesize: 5349 bytes");

sub initialize_fasta{
	my $db=Massprot::Fastadb->new(file=>"./t/testdata/testDB.fasta");
	1;	
}
sub reversedb{
	my $db=Massprot::Fastadb->new(file=>"./t/testdata/testDB.fasta");
	my $rdb=$db->reversedb(file=>$output_full_path);
	open IN, $output_full_path;
	local $/;
	my $rdb_text=<IN>;
	return 1 if $rdb_text eq $reversedb_text;
}







__DATA__
>tr|E9PDI2|E9PDI2_HUMAN Adenylyl cyclase-associated protein OS=Homo sapiens GN=CAP2 PE=2 SV=1
MANMQGLVERLERAVSRLESLSAESHRPPGNCGEVNGVIAGVAPSVEAFDKLMDSMVAEF
LKNSRILAGDVETHNDVAALLKPISEKIQEIQTFRERNRGSNMFNHLSAVSESIPALGWI
AVSPKPGPYVKEMNDAATFYTNRVLKDYKHSDLRHVDWVKSYLNIWSELQAYIKEHHTTG
LTWSKTGPVASTVSAFSVLSSGPGLPPPPPPLPPPGPPPLFENEGKKEESSPSRSALFAQ
LNQGEAITKGLRHVTDDQKTYKNPSLRAQGGQTQSPTKSHTPSPTSPKSYPSQKHAPVLE
LEGKKWRVEYQEDRNDLVISETELKQVAYIFKCEKSTIQIKGKVNSIIIDNCKKLGLVFD
NVVGIVEVINSQDIQIQVMGRVPTISINKTEGCHIYLSEDALDCEIVSAKSSEMNILIPQ
DGDYREFPIPEQFKTAWDGSKLITEPAEIMA
>dc|decoy_E9PDI2
AMIEAPETILKSGDWATKFQEPIPFERYDGDQPILINMESSKASVIECDLADESLYIHCG
ETKNISITPVRGMVQIQIDQSNIVEVIGVVNDFVLGLKKCNDIIISNVKGKIQITSKECK
FIYAVQKLETESIVLDNRDEQYEVRWKKGELELVPAHKQSPYSKPSTPSPTHSKTPSQTQ
GGQARLSPNKYTKQDDTVHRLGKTIAEGQNLQAFLASRSPSSEEKKGENEFLPPPGPPPL
PPPPPPLGPGSSLVSFASVTSAVPGTKSWTLGTTHHEKIYAQLESWINLYSKVWDVHRLD
SHKYDKLVRNTYFTAADNMEKVYPGPKPSVAIWGLAPISESVASLHNFMNSGRNRERFTQ
IEQIKESIPKLLAAVDNHTEVDGALIRSNKLFEAVMSDMLKDFAEVSPAVGAIVGNVEGC
NGPPRHSEASLSELRSVARELREVLGQMNAM
>tr|E9PDI2-1|E9PDI2-1_HUMAN Isoforma inventada OS=Homo sapiens GN=CAP2 PE=2 SV=1
MANMQGLVERLERAVSRLESLSAESHRPPGNCGEVNGVIAGVAPSVEAFDKLMDSMVAEF
LKNSRILAGDVETHNDVAALLKPISEKIQEIQTFRERNRGSNMFNHLSAVSESIPALGWI
AVSPKPGPYVKEMNDAATFYTNRVLKDYKHSDLRHVDWVKSYLNIWSELQAYIKEHHTTG
LTWSKTGPVASTVSAFSVLSSGPGLPPPPPPLPPPGPPPLFENEGKKEESSPSRSALFAQ
LNQGEAITKGLRHVTDDQKTYKNPSLRAQGGQTQSPTKSHTPSPTSPKSYPSQKHAPVLE
LEGKKWRVEYQEDRNDLVISETELKQVAYIFKCEKSTIQIKGKVNSII
>dc|decoy_E9PDI2-1
IISNVKGKIQITSKECKFIYAVQKLETESIVLDNRDEQYEVRWKKGELELVPAHKQSPYS
KPSTPSPTHSKTPSQTQGGQARLSPNKYTKQDDTVHRLGKTIAEGQNLQAFLASRSPSSE
EKKGENEFLPPPGPPPLPPPPPPLGPGSSLVSFASVTSAVPGTKSWTLGTTHHEKIYAQL
ESWINLYSKVWDVHRLDSHKYDKLVRNTYFTAADNMEKVYPGPKPSVAIWGLAPISESVA
SLHNFMNSGRNRERFTQIEQIKESIPKLLAAVDNHTEVDGALIRSNKLFEAVMSDMLKDF
AEVSPAVGAIVGNVEGCNGPPRHSEASLSELRSVARELREVLGQMNAM
>tr|E9PDI2-2|E9PDI2-2_HUMAN Isoforma inventada OS=Homo sapiens GN=CAP2 PE=2 SV=1
MANMQGLVERLERAVSRLESLSAESHRPPGNCGEVNGVIAGVAPSVEAFDKLMDSMVAEF
LKNSRILAGDVETHNDVAALLKPISEKIQEIQTFRERNRGSNMFNHLSAVSESIPALGWI
AVSPKPGPYVKEMNDAATFYTNRVLKDYKHSDLRHVDWVKSYLNIWSELQAYIKEHHTTG
LTWSKTGPVASTVSAFSVLSSGPGLPPPPPPLPPPGPPPLFENEGKKEESSPSRSALFAQ
LNQGEAITKGLRHVTDDQKTYKNPSLRAQGGQTQSPTKSHTPSPTSPKSYPSQKHAPVLE
LEGKKWRVEYQEDRNDLVISETELKQVAYIFKCEKSTIQIKGKVNSII
>dc|decoy_E9PDI2-2
IISNVKGKIQITSKECKFIYAVQKLETESIVLDNRDEQYEVRWKKGELELVPAHKQSPYS
KPSTPSPTHSKTPSQTQGGQARLSPNKYTKQDDTVHRLGKTIAEGQNLQAFLASRSPSSE
EKKGENEFLPPPGPPPLPPPPPPLGPGSSLVSFASVTSAVPGTKSWTLGTTHHEKIYAQL
ESWINLYSKVWDVHRLDSHKYDKLVRNTYFTAADNMEKVYPGPKPSVAIWGLAPISESVA
SLHNFMNSGRNRERFTQIEQIKESIPKLLAAVDNHTEVDGALIRSNKLFEAVMSDMLKDF
AEVSPAVGAIVGNVEGCNGPPRHSEASLSELRSVARELREVLGQMNAM
>sp|P61981|1433G_HUMAN 14-3-3 protein gamma OS=Homo sapiens GN=YWHAG PE=1 SV=2
MVDREQLVQKARLAEQAERYDDMAAAMKNVTELNEPLSNEERNLLSVAYKNVVGARRSSW
RVISSIEQKTSADGNEKKIEMVRAYREKIEKELEAVCQDVLSLLDNYLIKNCSETQYESK
VFYLKMKGDYYRYLAEVATGEKRATVVESSEKAYSEAHEISKEHMQPTHPIRLGLALNYS
VFYYEIQNAPEQACHLAKTAFDDAIAELDTLNEDSYKDSTLIMQLLRDNLTLWTSDQQDD
DGGEGNN
>dc|decoy_P61981
NNGEGGDDDQQDSTWLTLNDRLLQMILTSDKYSDENLTDLEAIADDFATKALHCAQEPAN
QIEYYFVSYNLALGLRIPHTPQMHEKSIEHAESYAKESSEVVTARKEGTAVEALYRYYDG
KMKLYFVKSEYQTESCNKILYNDLLSLVDQCVAELEKEIKERYARVMEIKKENGDASTKQ
EISSIVRWSSRRAGVVNKYAVSLLNREENSLPENLETVNKMAAAMDDYREAQEALRAKQV
LQERDVM
>sp|P61981-1|1433G_HUMAN isoforma inventada OS=Homo sapiens GN=YWHAG PE=1 SV=2
MVDREQLVQKARLAEQAERYDDMAAAMKNVTELNEPLSNEERNLLSVAYKNVVGARRSSW
RVISSIEQKTSADGNEKKIEMVRAYREKIEKELEAVCQDVLSLLDNYLIKNCSETQYESK
VFYLKMKGDYYRYLAEVATGEKRATVVESSEKAYSEAHEISKEHMQPTHPIRLGLALNYS
VFYYEIQNAPEQACHLAKTAFDDAIAELDTLNEDSYKDSTLIMQLLRDNLTLWTSDQQDD
DGGEGNN
>dc|decoy_P61981-1
NNGEGGDDDQQDSTWLTLNDRLLQMILTSDKYSDENLTDLEAIADDFATKALHCAQEPAN
QIEYYFVSYNLALGLRIPHTPQMHEKSIEHAESYAKESSEVVTARKEGTAVEALYRYYDG
KMKLYFVKSEYQTESCNKILYNDLLSLVDQCVAELEKEIKERYARVMEIKKENGDASTKQ
EISSIVRWSSRRAGVVNKYAVSLLNREENSLPENLETVNKMAAAMDDYREAQEALRAKQV
LQERDVM
>dc|decoy_P61981
NNGEGGDDDQQDSTWLTLNDRLLQMILTSDKYSDENLTDLEAIADDFATKALHCAQEPAN
QIEYYFVSYNLALGLRIPHTPQMHEKSIEHAESYAKESSEVVTARKEGTAVEALYRYYDG
KMKLYFVKSEYQTESCNKILYNDLLSLVDQCVAELEKEIKERYARVMEIKKENGDASTKQ
EISSIVRWSSRRAGVVNKYAVSLLNREENSLPENLETVNKMAAAMDDYREAQEALRAKQV
LQERDVM
>dc|decoy_decoy_P61981
MVDREQLVQKARLAEQAERYDDMAAAMKNVTELNEPLSNEERNLLSVAYKNVVGARRSSW
RVISSIEQKTSADGNEKKIEMVRAYREKIEKELEAVCQDVLSLLDNYLIKNCSETQYESK
VFYLKMKGDYYRYLAEVATGEKRATVVESSEKAYSEAHEISKEHMQPTHPIRLGLALNYS
VFYYEIQNAPEQACHLAKTAFDDAIAELDTLNEDSYKDSTLIMQLLRDNLTLWTSDQQDD
DGGEGNN
